app.controller('ChallengesCtrl', ['$scope','$auth','$location','$http', function($scope, $auth, $location,$http){

  $scope.challenges = [];
  $scope.results = [];

  //GET ALL RECIPES
  var getAllRecipes = function () {
    $http({
      method: "GET",
      url: "/api/recipes.json"
    }).then(function (response){
      console.log(response.data);
      $scope.challenges = response.data;
      $scope.results = response.data;
    },function (response){
      console.log(response);
    });
  };

  $scope.goToRecipe = function (id) {
    console.log(id);
    $http({
      method: "GET",
      url: "/api/recipes/"+id+".json"
    }).then(function (response){
      console.log(response.data);
    },function (response){
      console.log(response);
    });
  };

  //SELECT TYPE OF MEAL
  $scope.getMeal = function (type) {
    $scope.meal = type;
  };

  //FILTER FOR ALL VEGAN RECIPES
  $scope.showVegan = function () {
    $scope.results = [];
    for (var i=0;i<$scope.challenges.length;i++){
      if ($scope.challenges[i].vegan==true){
        $scope.results.push($scope.challenges[i]);
      };
    };
  };

  //FILTER FOR ALL GLUTEN FREE RECIPES
  $scope.showGlutenFree = function () {
    $scope.results = [];
    for (var i=0;i<$scope.challenges.length;i++){
      if ($scope.challenges[i].gluten_free==true){
        $scope.results.push($scope.challenges[i]);
      };
    };
  };

  //FILTER FOR ALL LOW CARB RECIPES
  $scope.showLowCarb = function () {
    $scope.results = [];
    for (var i=0;i<$scope.challenges.length;i++){
      if ($scope.challenges[i].low_carb==true){
        $scope.results.push($scope.challenges[i]);
      };
    };
  };

  //FILTER FOR ALL NUT FREE RECIPES
  $scope.showNutFree = function () {
    $scope.results = [];
    for (var i=0;i<$scope.challenges.length;i++){
      if ($scope.challenges[i].nut_free==true){
        $scope.results.push($scope.challenges[i]);
      };
    };
  };

  //FILTER FOR ALL SOY FREE RECIPES
  $scope.showSoyFree = function () {
    $scope.results = [];
    for (var i=0;i<$scope.challenges.length;i++){
      if ($scope.challenges[i].soy_free==true){
        $scope.results.push($scope.challenges[i]);
      };
    };
  };

  //REMOVE ALL FILTERS AND DISPLAY ALL RECIPES
  $scope.showAll = function () {
    $scope.results = $scope.challenges;
    $scope.meal = ""
  };

  getAllRecipes();
}]);