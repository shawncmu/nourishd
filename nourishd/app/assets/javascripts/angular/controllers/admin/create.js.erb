app.controller('NewRecipeCtrl', ['$scope', '$http', 'Upload', function($scope, $http, Upload){

  $scope.recipe = {};
  $scope.dishImage = {};
  $scope.ingredientsImage = {};
  $scope.form = {};

//ADD NEW RECIPE TO DATABASE
  $scope.form.create = function(){
    var data = {
      'newRecipe[name]': $scope.recipe.name,
      'newRecipe[instructions]': $scope.recipe.instructions,
      'newRecipe[video_url]': $scope.recipe.video,
      'newRecipe[cook_time]': $scope.recipe.cookingTime,
      'newRecipe[serving]': $scope.recipe.serving,
      'newRecipe[course]': $scope.recipe.course,
      'newRecipe[vegan]': $scope.recipe.vegan,
      'newRecipe[gluten_free]': $scope.recipe.glutenFree,
      'newRecipe[low_carb]': $scope.recipe.lowCarb,
      'newRecipe[exp_value]': $scope.recipe.experience,
      'newRecipe[equipment]': $scope.recipe.equipment,
      'newRecipe[ingredients_image]':$scope.ingredientsImage.file,
      'newRecipe[dish_image]':$scope.dishImage.file
    };

    Upload.upload({
      url: '/api/recipes.json',
      method:'POST',
      fields: data
    }).success(function(response) {
        console.log(response);
    });
  };
}]);